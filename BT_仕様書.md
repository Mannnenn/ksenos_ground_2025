# 概要

モード一覧

- 手動操縦

  マニュアル操作

- 自動旋回

  定常円旋回

- 8 の字

  8 の字軌道で周回

- 上昇旋回

  低空で定常円旋回、2 周したあとに徐々に高度上昇、安定した状態で定常円旋回 2 周

- 自動離着陸

  離陸後目標軌道に沿って移動、着陸して静止

# モードの詳細

## 手動操縦

何もしない

## 自動旋回

一定旋回半径 → 一定横加速度 → 一定ロール角
→ エルロン、ラダー制御

目標速度、高度一定

## 8 の字

8 の字軌道 → 旋回時の角度と軌道の曲率を結びつける(グラフ真ん中で θ=270deg とか)→ 曲率の逆数で半径を決定(発散はしきい値で抑える)→ ロール角徐々に変化
→ エルロン、ラダー制御

目標速度、高度一定

## 上昇旋回

旋回半径一定 →(速度一定で上昇できるなら)横加速度一定 → ロール角一定
→ エルロン、ラダー制御

目標速度一定、高度は回転角度に合わせて変化
一定値で 720deg.旋回 → 越したら徐々に増加、Ndeg.かけて上昇完了 → 一定値で旋回

## 自動離着陸

### 巡航時

L1 制御をもとに必要な横加速度を算出 → ロール角可変
(経路に対して現在位置から最近傍点を探索 → 最近傍点から経路上を L1 距離進める → 現在位置と L1 位置のベクトルを求める → 現在の進行方向ベクトルと比較して偏角 η を算出する → 横加速度 a\_(lat) = v^2 sin(η)/L1 を求める)
→ エルロン、ラダー制御

目標速度一定、高度は最近傍点から読み出し

### 離陸時

1. エレベータ全引き(人の操縦参考に量を決定)
2. スロットル Up
3. 高度で離陸判定
4. スロットル一定に、機体の角度水平に

### 着陸時

1. 迎角決定(スロットルダウン、進行方向速度、高迎角による抵抗、降下による速度増加を釣り合わせる角度)
2. スロットルダウン、斜め下の速度ベクトル、一定速度、一定角度
3. スロットル 0〜着陸〜停止
